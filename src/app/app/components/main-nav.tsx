import Link from "next/link";
import { getKindeServerSession } from "@kinde-oss/kinde-auth-nextjs/server";
import { cn } from "@/lib/utils";

export async function MainNav({
  className,
  ...props
}: React.HTMLAttributes<HTMLElement>) {
  const { isAuthenticated } = getKindeServerSession();
  const isUserAuthenticated = await isAuthenticated();
  const navLinks = isUserAuthenticated
    ? [
        {
          label: "Dashboard",
          href: "/app",
        },
        {
          label: "Settings",
          href: "/app/settings",
        },
      ]
    : [];
  return (
    <nav className={cn("flex items-center space-x-4", className)} {...props}>
      <Link
        href="/"
        className="text-sm font-medium transition-colors hover:text-primary"
      >
        <svg
          version="1.0"
          xmlns="http://www.w3.org/2000/svg"
          width="1024.000000pt"
          height="1024.000000pt"
          viewBox="0 0 1024.000000 1024.000000"
          preserveAspectRatio="xMidYMid meet"
          className="h-fit w-16"
        >
          <g
            transform="translate(0.000000,1024.000000) scale(0.100000,-0.100000)"
            fill="#000000"
            stroke="none"
          >
            <path
              d="M3474 7600 c-90 -12 -243 -66 -329 -117 -193 -113 -355 -326 -417
-548 -21 -77 -22 -96 -22 -550 -1 -456 0 -471 20 -509 37 -71 59 -80 199 -86
119 -5 125 -6 161 -35 100 -82 97 -213 -8 -282 l-41 -28 -266 -5 c-294 -6
-300 -7 -358 -73 -98 -112 -43 -291 105 -347 l57 -22 670 7 c705 7 738 6 798
-37 34 -24 67 -89 67 -133 0 -53 -34 -111 -82 -138 l-43 -25 -875 -7 c-810 -7
-878 -9 -910 -25 -123 -63 -146 -215 -47 -319 62 -65 87 -71 329 -71 l217 0 4
-442 c3 -412 5 -449 25 -524 28 -108 61 -180 126 -278 125 -187 285 -308 493
-373 l88 -28 1660 0 1660 0 82 22 c161 43 266 96 374 190 118 103 192 205 254
350 69 160 65 50 65 1938 0 1888 4 1778 -65 1938 -54 126 -94 186 -195 288
-100 101 -181 156 -308 209 -161 68 -38 64 -1817 66 -885 1 -1637 -2 -1671 -6z
m271 -515 c224 -59 365 -232 365 -449 0 -138 -46 -249 -145 -348 -153 -153
-409 -170 -596 -40 -68 48 -143 140 -171 212 -30 77 -36 217 -13 296 69 240
325 390 560 329z m3305 -43 c0 -4 -59 -144 -131 -312 -209 -487 -271 -634
-352 -825 -87 -207 -312 -745 -463 -1107 -105 -255 -123 -289 -174 -331 -37
-32 -116 -50 -160 -37 -46 13 -81 43 -272 226 -93 90 -174 164 -180 164 -7 0
-7 -5 1 -13 6 -8 8 -17 4 -21 -4 -4 1 -4 12 -1 14 5 13 2 -4 -8 -16 -10 -20
-16 -12 -21 7 -4 20 -2 29 5 23 16 -55 -60 -268 -262 -280 -267 -304 -288
-317 -289 -10 0 -13 117 -13 554 l0 553 33 31 c17 17 84 70 147 118 63 47 368
278 678 513 1178 891 1418 1071 1433 1071 5 0 9 -3 9 -8z m-2180 -23 c241
-109 171 -460 -92 -459 -39 0 -78 7 -103 19 -46 20 -101 79 -121 127 -18 43
-18 135 0 178 19 45 81 113 125 136 49 26 133 25 191 -1z m1665 -59 c-4 -6
-50 -44 -103 -84 -54 -40 -218 -164 -367 -276 -148 -112 -385 -292 -525 -400
-235 -180 -608 -460 -740 -555 -30 -22 -93 -70 -140 -108 -47 -37 -116 -83
-154 -102 l-69 -35 -449 0 c-494 0 -492 0 -523 61 -31 60 2 113 102 163 52 26
236 109 1293 585 283 128 637 288 785 357 208 95 876 397 893 403 2 1 0 -4 -3
-9z m363 -1846 c128 -53 182 -203 116 -323 -64 -119 -198 -164 -319 -107 -126
58 -173 204 -105 323 47 81 117 122 213 123 32 0 74 -7 95 -16z m-2649 -873
c48 -10 84 -33 115 -75 16 -21 21 -42 21 -90 0 -53 -4 -68 -28 -99 -56 -74
-36 -72 -574 -75 -316 -2 -496 1 -522 8 -145 39 -159 248 -21 318 44 22 47 22
505 22 253 -1 480 -5 504 -9z m2465 -107 c14 -5 16 -29 16 -165 0 -152 -1
-158 -22 -173 -19 -14 -67 -16 -325 -16 -301 0 -302 0 -317 22 -20 29 -23 307
-4 326 9 9 95 12 324 12 172 0 319 -3 328 -6z m-797 -406 l132 -128 326 0
c201 0 334 4 345 10 11 6 83 69 162 140 79 72 147 130 151 130 4 0 6 -148 5
-328 l-3 -329 -28 -36 c-57 -75 -33 -72 -599 -75 -361 -2 -519 0 -550 8 -55
15 -102 65 -117 124 -12 48 -16 617 -5 629 13 12 51 -18 181 -145z m-904 52
c94 -35 158 -122 158 -214 0 -169 -157 -284 -322 -235 -121 37 -194 197 -143
317 26 64 92 121 164 143 43 13 88 10 143 -11z m-738 -319 c126 -57 142 -213
31 -295 -27 -20 -40 -21 -534 -24 -479 -2 -509 -1 -542 16 -54 29 -81 84 -78
157 4 74 33 119 92 146 38 17 74 19 516 19 439 0 478 -2 515 -19z"
            />
            <path
              d="M4980 5135 c13 -14 26 -25 28 -25 3 0 -5 11 -18 25 -13 14 -26 25
-28 25 -3 0 5 -11 18 -25z"
            />
            <path
              d="M5090 5025 c13 -14 26 -25 28 -25 3 0 -5 11 -18 25 -13 14 -26 25
-28 25 -3 0 5 -11 18 -25z"
            />
            <path d="M5240 4875 c7 -9 15 -13 17 -11 7 7 -7 26 -19 26 -6 0 -6 -6 2 -15z" />
            <path
              d="M5270 4856 c0 -2 8 -10 18 -17 15 -13 16 -12 3 4 -13 16 -21 21 -21
13z"
            />
          </g>
        </svg>
      </Link>
      {navLinks.map((navLink) => (
        <Link
          key={navLink.href}
          href={navLink.href}
          className="text-sm font-medium transition-colors hover:text-primary"
        >
          {navLink.label}
        </Link>
      ))}
    </nav>
  );
}
